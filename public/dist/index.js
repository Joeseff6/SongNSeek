const searchForm=$(`#searchForm`),searchField=$(`#searchField`),list=$(`#list`);capitalize($(`#username`).text()),(`/library`===document.location.pathname||`/`===document.location.pathname)&&searchForm.show();searchForm.submit(a=>{a.preventDefault();let b=searchField.val().split(` `),c=b.join(`%20`);const d=getRequest(`https://deezerdevs-deezer.p.rapidapi.com/search?q=${c}&index=0&limit=15`);$.ajax(d).done(function(a){let b=a.data.map(a=>{let b={artist_name:a.artist.name,artist_songs:a.artist.tracklist,artist_id:a.artist.id,artist_image_med:a.artist.picture_medium,artist_image_big:a.artist.picture_big,album_title:a.album.title,album_id:a.album.id,album_image_med:a.album.cover_medium,album_image_big:a.album.cover_big,song_name:a.title,song_id:a.id};return b});createList(b),$(`.searchOption`).click(function(){let a=$(this).attr(`data-index`),c=b[a];saveChoice(c)})})}),$(`#deleteUser`).click(function(){deleteUser()});function capitalize(a){let b=a.charAt(0).toUpperCase()+a.slice(1);$(`#username`).text(b)}const createList=a=>{if($(`.remove`).remove(),0===a.length){let a=$(`<li/>`);return a.text(`No results found!`).attr(`class`,`btn remove list-group-item`),list.append(a),void searchField.val(``)}for(let b,c=0;c<a.length-1;c++)b=$(`<li/>`),b.text(`${a[c].artist_name}/${a[c].song_name}/${a[c].album_title}`).attr(`class`,`btn remove searchOption list-group-item`).attr(`data-index`,`${c}`),list.append(b);searchField.val(``)},getRequest=a=>{return{async:!0,crossDomain:!0,url:a,method:"GET",headers:{"x-rapidapi-key":"4158f96d1emsh29be4d938fb2c05p1b6561jsn48bbd9b8afa1","x-rapidapi-host":"deezerdevs-deezer.p.rapidapi.com"}}},saveChoice=async a=>{await fetch(`/api/library/`,{method:`POST`,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),document.location.replace("/artists")},deleteUser=async()=>{await fetch(`/api/users/deleteUser`,{method:"DELETE",headers:{"Content-Type":"application/json"}}),document.location.replace(`/`)},deleteArtist=async a=>{await fetch(`/api/library/artist`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})};